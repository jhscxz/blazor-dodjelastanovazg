@using MudBlazor
@using System.Globalization

<MudDatePicker ShrinkLabel T="DateTime?"
               @bind-Value="InternalValue"
               @bind-Date="InternalValue"
               Label="@Label"
               Immediate="true"
               Editable="true"
               DateFormat="@DateFormat"
               Culture="@Culture"
               Variant="Variant.Text"
               Margin="Margin.Dense"
               Class="mb-2"
               Required="@Required" />

@code {
    [Parameter] public DateTime? Value { get; set; }
    [Parameter] public EventCallback<DateTime?> ValueChanged { get; set; }

    [Parameter] public string Label { get; set; } = "Datum";
    [Parameter] public bool Required { get; set; }
    [Parameter] public string DateFormat { get; set; } = "dd.MM.yyyy";
    [Parameter] public CultureInfo Culture { get; set; } = new("hr-HR");

    private DateTime? InternalValue
    {
        get => Value;
        set
        {
            if (Value == value) return;
            Value = value;
            ValueChanged.InvokeAsync(value);
        }
    }
}
