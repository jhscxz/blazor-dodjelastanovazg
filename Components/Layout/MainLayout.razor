@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Identity
@inherits LayoutComponentBase
@inject NavigationManager Navigation
@inject SignInManager<IdentityUser> SignInManager

<!-- Učitavanje Tailwind CSS (minificirana verzija) -->
<link href="css/tw.min.css" rel="stylesheet">
<link href="css/tailwind.css" rel="stylesheet">

<!-- Glavni kontejner koji pokriva cijelu stranicu -->
<div class="flex flex-col min-h-screen">
    <!-- Gornja navigacija -->
    <header class="bg-[#163d73] text-white">
        <div class="max-w-[105rem] mx-auto px-4 py-md-3 flex items-center">

            <!-- Lijevi blok: Logo i naziv ureda -->
            <div class="flex items-center space-x-2 mr-auto">
                <img src="images/logo.png" alt="Zagreb Grb" class="h-14 w-auto"/>
                <div class="leading-tight">
                    <div class="font-bold text-xs">GRAD ZAGREB - GRADSKI URED ZA UPRAVLJANJE IMOVINOM I STANOVANJE</div>
                    <div class="text-xs">DODJELA STANOVA</div>
                </div>
            </div>

            <!-- Srednji blok: Navigacija kroz aplikaciju -->
            <nav class="bg-[#1e497f] rounded-lg px-3 py-1 flex items-center space-x-3">
                <NavLink href="/" class="px-3 py-2 text-xs font-bold text-white rounded-lg hover:bg-[#163d73] transition-colors duration-200 no-underline">POČETNA</NavLink>
                <NavLink href="/socijalni-natjecaj" class="px-3 py-2 text-xs font-bold text-white rounded-lg hover:bg-[#163d73] transition-colors duration-200 no-underline">SOCIJALNI NATJEČAJ</NavLink>
                <NavLink href="/pristivi-natjecaj" class="px-3 py-2 text-xs font-bold text-white rounded-lg hover:bg-[#163d73] transition-colors duration-200 no-underline">PRIUŠTIVI NATJEČAJ</NavLink>
                <NavLink href="/izracun-najamnine" class="px-3 py-2 text-xs font-bold text-white rounded-lg hover:bg-[#163d73] transition-colors duration-200 no-underline">IZRAČUN NAJAMNINE</NavLink>
            </nav>

            <!-- Desni blok: Korisničke informacije + Logout -->
            <div class="ml-auto">
                <div class="bg-[#1e497f] rounded px-3 py-1 flex items-center space-x-2">
                    <span class="px-2 py-2 rounded text-xs hover:bg-[#0B2C4D] transition-colors duration-200">JHUSIC</span>
                    <span class="px-2 py-2 rounded text-xs font-bold text-red-500 hover:bg-red-600 hover:text-white transition-colors duration-200">SUPERADMIN</span>
                    <NavLink href="/admin" class="px-3 py-2 rounded text-xs font-bold text-white hover:bg-[#163d73] transition-colors duration-200">Admin Panel</NavLink>

                    <!-- Logout gumb -->
                    <AuthorizeView>
                        <Authorized>
                            <NavLink href="/Identity/Account/Logout" class="px-3 py-2 rounded text-xs font-bold text-white bg-red-500 hover:bg-red-600 transition-colors duration-200">
                                Logout
                            </NavLink>
                        </Authorized>
                    </AuthorizeView>
                </div>
            </div>
        </div>
    </header>

    <!-- Glavni sadržaj stranice -->
    <main class="flex-grow container mx-auto p-4">
        <article class="content">
            @Body
        </article>
    </main>

    <!-- Prikaz greške u Blazoru -->
    <div id="blazor-error-ui" data-nosnippet>
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">🗙</span>
    </div>

    <!-- Podnožje stranice -->
    <footer class="mt-4 bg-white dark:bg-gray-900 flex-shrink-0 border border-gray-300">
        <div class="mx-auto w-full max-w-screen-xl p-4 py-3 lg:py-4">
            <div class="sm:flex sm:items-center sm:justify-between">
                <span class="text-sm text-gray-400 sm:text-right dark:text-gray-300 inline-block">
                    <span style="color: #163d73;">© Grad Zagreb</span>,
                    <span style="font-size: 0.85em;">handcrafted by Jasmin Husić</span>
                </span>
            </div>
        </div>
    </footer>
</div>

