@page "/profile/change-password"
@using Microsoft.AspNetCore.Authorization
@using MudBlazor
@using DodjelaStanovaZG.Components.UI
@using DodjelaStanovaZG.Components.UI.Buttons

@attribute [Authorize]

<Container BreadcrumbItems="BreadcrumbItems">
    <FormCard Xs="12" Sm="10" Md="6" Lg="4" CardStyle="width: 350px; margin: auto;" ErrorMessages="_errorMessages">
        <MudForm @ref="_form" Model="@_changePasswordModel">

            <!-- Trenutna (stara) lozinka -->
            <MudTextField ShrinkLabel T="string"
                          Label="Trenutna lozinka"
                          For="@(() => _changePasswordModel.OldPassword)"
                          @bind-Value="_changePasswordModel.OldPassword"
                          InputType="InputType.Password"
                          Required="true"
                          Margin="Margin.Dense"
                          Variant="Variant.Outlined"
                          Class="mb-3"/>

            <!-- Nova lozinka -->
            <MudTextField ShrinkLabel T="string"
                          Label="Nova lozinka"
                          For="@(() => _changePasswordModel.NewPassword)"
                          @bind-Value="_changePasswordModel.NewPassword"
                          InputType="InputType.Password"
                          Required="true"
                          Margin="Margin.Dense"
                          Variant="Variant.Outlined"
                          Class="mb-3"/>

            <!-- Potvrdi novu lozinku -->
            <MudTextField ShrinkLabel T="string"
                          Label="Potvrdi novu lozinku"
                          For="@(() => _changePasswordModel.ConfirmPassword)"
                          @bind-Value="_changePasswordModel.ConfirmPassword"
                          InputType="InputType.Password"
                          Required="true"
                          Margin="Margin.Dense"
                          Variant="Variant.Outlined"
                          Class="mb-3"/>

            <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mt-4">
                <ChangePasswordButton OnClick="ChangePasswordAsync"/>
            </MudStack>
        </MudForm>
    </FormCard>
</Container>
