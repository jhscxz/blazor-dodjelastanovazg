@page "/socijalni/detalji/{Id:long}"
@using DodjelaStanovaZG.Areas.SocijalniNatjecaj.Pages.Components.Detalji
@using DodjelaStanovaZG.Components.UI
@using DodjelaStanovaZG.Enums
@using MudBlazor

<Container BreadcrumbItems="BreadcrumbItems">
        <MudGrid Justify="Justify.Center">
            <MudItem xs="12" sm="10" md="8" lg="6">
                <MudCard Outlined="true" Rounded="true" Class="pa-6">
                    <MudCardContent>

                        @if (_detalji is null)
                        {
                            <MudProgressCircular Color="Color.Primary" Indeterminate="true"/>
                        }
                        else
                        {
                            <MudTabs @bind-ActivePanelIndex="_selectedTabIndex"
                                     Rounded="true"
                                     PanelClass="pa-6">

                                <MudTabPanel Text="Osnovni podaci">
                                    <OsnovniPodaciTab Detalji="_detalji"/>
                                </MudTabPanel>

                                <MudTabPanel Text="Podaci o kućanstvu">
                                    <KucanstvoPodaciTab Kucanstvo="_detalji.KucanstvoPodaci"/>
                                </MudTabPanel>

                                @if (_detalji.RezultatObrade == RezultatObrade.Zadovoljava)
                                {
                                    <MudTabPanel Text="Članovi kućanstva">
                                        <ClanoviKucanstvaTab
                                            Id="@_detalji.Id"
                                            Clanovi="@_detalji.Clanovi"
                                            CreatedBy="@_detalji.CreatedBy"
                                            CreatedByUserName="@_detalji.CreatedByUserName"
                                            CreatedAt="@_detalji.CreatedAt"
                                            UpdatedBy="@_detalji.UpdatedBy"
                                            UpdatedByUserName="@_detalji.UpdatedByUserName"
                                            UpdatedAt="@_detalji.UpdatedAt" />

                                    </MudTabPanel>
                                }

                                @if (_detalji.RezultatObrade == RezultatObrade.Zadovoljava)
                                {
                                    <MudTabPanel Text="Opcije bodovanja">
                                        <BodovanjeOpcijeTab BodovniPodaci="_detalji.Bodovni"/>
                                    </MudTabPanel>
                                }
                            </MudTabs>
                        }

                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
</Container>