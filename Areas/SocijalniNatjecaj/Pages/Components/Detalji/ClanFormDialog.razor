@using System.Globalization
@using MudBlazor
@using DodjelaStanovaZG.Enums
@using DodjelaStanovaZG.Helpers
@using DodjelaStanovaZG.Components.UI.MudInputs

<MudCard Outlined="true" Rounded="true" Class="pa-6 border border-gray-300">
    <MudCardContent>
        <MudForm @ref="_form" Model="@NewClan">
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField T="string"
                                  Label="Ime i prezime"
                                  @bind-Value="NewClan.ImePrezime"
                                  Required="true"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense"
                                  Class="mb-1"
                                  ShrinkLabel="true"/>
                </MudItem>

                <MudItem xs="12">
                    <MudTextField T="string"
                                  Label="OIB"
                                  @bind-Value="NewClan.Oib"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense"
                                  Class="mb-1"
                                  ShrinkLabel="true"/>
                </MudItem>

                <MudItem xs="12">
                    <DateInput Label="Datum rođenja"
                               @bind-Value="DatumRodjenjaProxy"
                               Required="true"
                               DateFormat="dd.MM.yyyy"
                               Culture="@(new CultureInfo("hr-HR"))" />
                </MudItem>

                <MudItem xs="12">
                <DateInput Label="Datum podnošenja" @bind-Value="DatumRodjenjaProxy"
                           Required="true"/>
                </MudItem>

                <MudItem xs="12">
                    @if (!IsPodnositelj)
                    {
                        <MudSelect ShrinkLabel T="Srodstvo?" Label="Srodstvo"
                                   @bind-Value="NewClan.Srodstvo"
                                   Variant="Variant.Outlined"
                                   Margin="Margin.Dense"
                                   Class="mb-1"
                                   Required="true">
                            <MudSelectItem T="Srodstvo?" Value="@null">Odaberi...</MudSelectItem>
                            @foreach (var item in Enum.GetValues<Srodstvo>())
                            {
                                if (item != Srodstvo.PodnositeljZahtjeva)
                                {
                                    <MudSelectItem T="Srodstvo?" Value="(Srodstvo?)item">@item.GetDisplayName()</MudSelectItem>
                                }
                            }
                        </MudSelect>

                    }

                </MudItem>
            </MudGrid>

            <MudStack Row="true" Justify="Justify.FlexEnd" Spacing="2" Class="mt-4">
                <MudButton OnClick="@Submit"
                           StartIcon="@Icons.Material.Filled.Save"
                           Size="Size.Small"
                           Variant="Variant.Filled"
                           Style="border: 1px solid #d3d3d3;"
                           DropShadow="false"
                           IconColor="Color.Success"
                           Color="Color.Default">
                    Spremi
                </MudButton>

                <MudButton OnClick="@Cancel"
                           StartIcon="@Icons.Material.Filled.Cancel"
                           Size="Size.Small"
                           Variant="Variant.Filled"
                           Style="border: 1px solid #d3d3d3;"
                           DropShadow="false"
                           IconColor="Color.Error"
                           Color="Color.Default">
                    Odustani
                </MudButton>
            </MudStack>
        </MudForm>
    </MudCardContent>
</MudCard>
