@using System.Globalization
@using MudBlazor
@using DodjelaStanovaZG.Enums

<MudCard Outlined="true" Rounded="true" Class="pa-6 border border-gray-300">
    <MudCardContent>
        <MudForm @ref="_form" Model="@NewClan">
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField T="string"
                                  Label="Ime i prezime"
                                  @bind-Value="NewClan.ImePrezime"
                                  Required="true"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense"
                                  Class="mb-1"
                                  ShrinkLabel="true"/>
                </MudItem>

                <MudItem xs="12">
                    <MudTextField T="string"
                                  Label="OIB"
                                  @bind-Value="NewClan.Oib"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense"
                                  Class="mb-1"
                                  ShrinkLabel="true"/>
                </MudItem>

                <MudItem xs="12">
                    <MudDatePicker ShrinkLabel T="DateOnly"
                                   Label="Datum roÄ‘enja"
                                   @bind-Date="_datumRodjenja"
                                   Required="true"
                                   DateFormat="dd.MM.yyyy"
                                   Culture="@(new CultureInfo("hr-HR"))"
                                   Variant="Variant.Outlined"
                                   Margin="Margin.Dense"
                                   Class="mb-1" />
                </MudItem>

                <MudItem xs="12">
                    @if (IsPodnositelj)
                    {
                        <MudTextField T="string"
                                      Label="Srodstvo"
                                      Value="@("Podnositelj zahtjeva")"
                                      ReadOnly="true"
                                      Disabled="true"
                                      Color="Color.Disabled"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Class="mb-1" />
                    }
                    else
                    {
                        <MudSelect ShrinkLabel T="Srodstvo?" Label="Srodstvo"
                                   @bind-Value="NewClan.Srodstvo"
                                   Variant="Variant.Outlined"
                                   Margin="Margin.Dense"
                                   Class="mb-1"
                                   Required="true">
                            <MudSelectItem T="Srodstvo?" Value="@null">Odaberi...</MudSelectItem>
                            @foreach (var item in Enum.GetValues<Srodstvo>())
                            {
                                <MudSelectItem T="Srodstvo?" Value="(Srodstvo?)item">@item.ToString()</MudSelectItem>
                            }
                        </MudSelect>
                    }
                </MudItem>
            </MudGrid>

            <MudStack Row="true" Justify="Justify.FlexEnd" Spacing="2" Class="mt-4">
                <MudButton OnClick="@Submit"
                           StartIcon="@Icons.Material.Filled.Save"
                           Size="Size.Small"
                           Variant="Variant.Filled"
                           Style="border: 1px solid #d3d3d3;"
                           DropShadow="false"
                           IconColor="Color.Success"
                           Color="Color.Default">
                    Spremi
                </MudButton>

                <MudButton OnClick="@Cancel"
                           StartIcon="@Icons.Material.Filled.Cancel"
                           Size="Size.Small"
                           Variant="Variant.Filled"
                           Style="border: 1px solid #d3d3d3;"
                           DropShadow="false"
                           IconColor="Color.Error"
                           Color="Color.Default">
                    Odustani
                </MudButton>
            </MudStack>
        </MudForm>
    </MudCardContent>
</MudCard>
