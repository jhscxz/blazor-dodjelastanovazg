@page "/socijalni/kucanstvo/edit/{ZahtjevId:long}"
@using DodjelaStanovaZG.Enums
@using System.Globalization
@using MudBlazor
@using Microsoft.AspNetCore.Components.Web
@using DodjelaStanovaZG.Components.UI
@using DodjelaStanovaZG.Helpers
@using DodjelaStanovaZG.Components.UI.MudInputs

<PageTitle>Uredi kućanstvo</PageTitle>

<Container BreadcrumbItems="BreadcrumbItems">
    <MudContainer MaxWidth="MaxWidth.Small" >
        @if (_kucanstvoModel is null)
        {
            <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
        }
        else
        {
            <MudCard Outlined="true" Rounded="true" Class="pa-6 border border-gray-300">
                <MudCardContent>
                    <MudForm @ref="_form" Model="@_kucanstvoModel">
                        <MudStack Spacing="3">

                            <MudTextField ShrinkLabel T="decimal?"
                                          Label="Ukupni prihod kućanstva"
                                          @bind-Value="_kucanstvoModel.UkupniPrihodKucanstva"
                                          Required="true"
                                          Variant="Variant.Text"
                                          Margin="Margin.Dense"
                                          Adornment="Adornment.End"
                                          AdornmentText="€" />
                            
                            <DateInput Label="Datum podnošenja" @bind-Value="_prebivanjeOd"
                                       Required="true"/>

                            <MudSelect ShrinkLabel T="StambeniStatusKucanstva?"
                                       Label="Stambeni status kućanstva"
                                       @bind-Value="_kucanstvoModel.StambeniStatusKucanstva"
                                       Required="true"
                                       Variant="Variant.Text"
                                       Margin="Margin.Dense">
                                <MudSelectItem T="StambeniStatusKucanstva?" Value="null"></MudSelectItem>
                                @foreach (var item in Enum.GetValues<StambeniStatusKucanstva>())
                                {
                                    <MudSelectItem Value="(StambeniStatusKucanstva?)item">@item.GetDisplayName()</MudSelectItem>
                                }
                            </MudSelect>

                            <MudSelect ShrinkLabel T="SastavKucanstva?"
                                       Label="Sastav kućanstva"
                                       @bind-Value="_kucanstvoModel.SastavKucanstva"
                                       Required="true"
                                       Variant="Variant.Text"
                                       Margin="Margin.Dense">
                                <MudSelectItem T="SastavKucanstva?" Value="null"></MudSelectItem>
                                @foreach (var item in Enum.GetValues<SastavKucanstva>())
                                {
                                    <MudSelectItem Value="(SastavKucanstva?)item">@item.GetDisplayName()</MudSelectItem>
                                }
                            </MudSelect>

                            <MudStack Row="true" Justify="Justify.FlexEnd" Spacing="2" Class="mt-4">
                                <MudButton OnClick="@OnValidSubmit"
                                           StartIcon="@Icons.Material.Filled.Save"
                                           Size="Size.Small"
                                           Variant="Variant.Filled"
                                           Style="border: 1px solid #d3d3d3;"
                                           DropShadow="false"
                                           IconColor="Color.Success"
                                           Color="Color.Default">
                                    Spremi
                                </MudButton>

                                <MudButton OnClick="@OnCancel"
                                           StartIcon="@Icons.Material.Filled.Cancel"
                                           Size="Size.Small"
                                           DropShadow="false"
                                           Style="border: 1px solid #d3d3d3;"
                                           Variant="Variant.Filled"
                                           IconColor="Color.Error"
                                           Color="Color.Default">
                                    Odustani
                                </MudButton>
                            </MudStack>

                        </MudStack>
                    </MudForm>
                </MudCardContent>
            </MudCard>
        }
    </MudContainer>
</Container>
