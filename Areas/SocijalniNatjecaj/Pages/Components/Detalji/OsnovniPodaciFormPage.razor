@page "/socijalni/osnovno/edit/{ZahtjevId:long}"
@using System.Globalization
@using DodjelaStanovaZG.Components.UI
@using MudBlazor
@using DodjelaStanovaZG.Enums
@using Microsoft.AspNetCore.Components.Web

<PageTitle>Uredi osnovne podatke</PageTitle>

<Container BreadcrumbItems="BreadcrumbItems">
    <MudContainer MaxWidth="MaxWidth.Small">
        @if (_socijalniNatjecajModel is null)
        {
            <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
        }
        else
        {
            <MudCard Outlined="true" Rounded="true" Class="pa-6 border border-gray-300">
                <MudCardContent>
                    <MudForm @ref="_form" Model="@_socijalniNatjecajModel">
                        <MudStack Spacing="3">
                            
                            <MudDatePicker ShrinkLabel T="DateTime?"
                                           Label="Datum podnoÅ¡enja zahtjeva"
                                           @bind-Date="_datumPodnosenja"
                                           Required="true"
                                           DateFormat="dd.MM.yyyy"
                                           Culture="@(new CultureInfo("hr-HR"))"
                                           Variant="Variant.Outlined"
                                           Margin="Margin.Dense"
                                           Clearable="true"
                                           AllowKeyboardInput="true" />

                            <MudTextField ShrinkLabel T="string?"
                                          Label="Adresa"
                                          @bind-Value="_socijalniNatjecajModel.Adresa"
                                          Variant="Variant.Outlined"
                                          Margin="Margin.Dense" />

                            <MudSelect ShrinkLabel T="RezultatObrade?"
                                       Label="Rezultat obrade"
                                       @bind-Value="_socijalniNatjecajModel.RezultatObrade"
                                       Required="true"
                                       Variant="Variant.Outlined"
                                       Margin="Margin.Dense">
                                <MudSelectItem T="RezultatObrade?" Value="null">Odaberi rezultat obrade</MudSelectItem>
                                @foreach (var item in Enum.GetValues<RezultatObrade>())
                                {
                                    <MudSelectItem T="RezultatObrade?" Value="item">@item.ToString()</MudSelectItem>
                                }
                            </MudSelect>


                            <MudTextField ShrinkLabel T="string?"
                                          Label="Napomena obrade"
                                          @bind-Value="_socijalniNatjecajModel.NapomenaObrade"
                                          Variant="Variant.Outlined"
                                          Margin="Margin.Dense" />

                            <MudStack Row="true" Justify="Justify.FlexEnd" Spacing="2" Class="mt-4">
                                <MudButton OnClick="@OnValidSubmit"
                                           StartIcon="@Icons.Material.Filled.Save"
                                           Size="Size.Small"
                                           Variant="Variant.Filled"
                                           Style="border: 1px solid #d3d3d3;"
                                           DropShadow="false"
                                           IconColor="Color.Success"
                                           Color="Color.Default">
                                    Spremi
                                </MudButton>

                                <MudButton OnClick="@OnCancel"
                                           StartIcon="@Icons.Material.Filled.Cancel"
                                           Size="Size.Small"
                                           DropShadow="false"
                                           Style="border: 1px solid #d3d3d3;"
                                           Variant="Variant.Filled"
                                           IconColor="Color.Error"
                                           Color="Color.Default">
                                    Odustani
                                </MudButton>
                            </MudStack>

                        </MudStack>
                    </MudForm>
                </MudCardContent>
            </MudCard>
        }
    </MudContainer>
</Container>
