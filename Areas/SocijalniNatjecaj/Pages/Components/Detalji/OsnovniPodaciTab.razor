@using DodjelaStanovaZG.Areas.SocijalniNatjecaj.DTO
@using DodjelaStanovaZG.Enums
@using MudBlazor
@inject NavigationManager Navigation

@code {
    [Parameter]
    public SocijalniNatjecajZahtjevDto Detalji { get; set; } = new();
}

<MudStack Spacing="4">

    <!-- MudCard -->
    <MudCard Outlined="true" Class="pa-4">

        <!-- Klasa predmeta i Datum podnošenja u gridu -->
        <MudGrid Gutter="Size.Small">
            <!-- Klasa predmeta -->
            <MudItem xs="12" sm="6">
                <MudTextField ShrinkLabel T="string"
                              Value="@Detalji.KlasaPredmeta.ToString()"
                              Label="Klasa predmeta"
                              ReadOnly="true"
                              Typo="Typo.subtitle1"
                              Variant="Variant.Text"
                              Margin="Margin.Dense"
                              Class="mb-0" />
            </MudItem>

            <!-- Datum podnošenja -->
            <MudItem xs="12" sm="6">
                <MudTextField ShrinkLabel T="string"
                              Value="@($"{Detalji.DatumPodnosenjaZahtjeva:dd.MM.yyyy}")"
                              Label="Datum podnošenja"
                              ReadOnly="true"
                              Typo="Typo.subtitle1"
                              Variant="Variant.Text"
                              Margin="Margin.Dense"
                              Class="mb-0" />
            </MudItem>
        </MudGrid>

        <!-- Adresa -->
        <MudTextField ShrinkLabel T="string"
                      Value="@Detalji.Adresa"
                      Label="Adresa"
                      ReadOnly="true"
                      Typo="Typo.subtitle1"
                      Variant="Variant.Text"
                      Margin="Margin.Dense"
                      Class="mb-0" />

        <!-- Napomena obrade -->
        <MudItem xs="12">
            <MudTextField ShrinkLabel T="string"
                          Label="Napomena"
                          Value="@Detalji.NapomenaObrade"
                          ReadOnly="true"
                          Typo="Typo.subtitle1"
                          Variant="Variant.Text" 
                          Margin="Margin.Dense"
                          Class="mb-4"
                          Lines="3" />
        </MudItem>

    </MudCard>

    <!-- MudChip i Gumb za Editiranje u istom redu -->
    <MudStack Spacing="2" Row="true" Justify="Justify.SpaceBetween">
        <MudStack Spacing="2" Direction="Row">
            @if (Detalji.RezultatObrade == RezultatObrade.Neosnovan)
            {
                <MudChip T="string" Color="Color.Error" Style="max-width: 200px; display: inline-flex; align-items: center; justify-content: center; padding: 2px 10px; border-radius: 0px;">
                    <MudIcon Icon="@Icons.Material.Filled.Dangerous" IconColor="Color.Error" />
                    Neosnovan
                </MudChip>
            }
            else if (Detalji.RezultatObrade == RezultatObrade.Nepotpun)
            {
                <MudChip T="string" Color="Color.Warning" Style="max-width: 200px; display: inline-flex; align-items: center; justify-content: center; padding: 2px 10px; border-radius: 0px;">
                    <MudIcon Icon="@Icons.Material.Filled.Warning" IconColor="Color.Warning" />
                    Nepotpuno
                </MudChip>
            }
            else if (Detalji.RezultatObrade == RezultatObrade.Zadovoljava)
            {
                <MudChip T="string" Variant="Variant.Outlined" Color="Color.Success" Style="max-width: 200px; display: inline-flex; align-items: center; justify-content: center; padding: 2px 10px; border-radius: 0px;">
                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" IconColor="Color.Success" />
                    Ispunjava uvjete
                </MudChip>
            }
        </MudStack>

        <MudButton StartIcon="@Icons.Material.Filled.Edit"
                   Variant="Variant.Filled"
                   Size="Size.Small"
                   Style="border: 1px solid #d3d3d3;"
                   DropShadow="false"
                   IconColor="Color.Info"
                   Color="Color.Default"
                   OnClick="@(() => Navigation.NavigateTo($"/socijalni/osnovno/edit/{Detalji.Id}"))">
            Uredi osnovne podatke
        </MudButton>
    </MudStack>

</MudStack>
