@page "/admin/users/change-password/{UserId}"
@using Microsoft.AspNetCore.Authorization
@using MudBlazor
@using Microsoft.AspNetCore.Identity
@using DodjelaStanovaZG.Components.UI
@using DodjelaStanovaZG.Areas.Admin.Korisnici.DTO

@attribute [Authorize(Policy = "ImaPristupAdmin")]

<Container BreadcrumbItems="BreadcrumbItems">
    <MudGrid Justify="Justify.Center">
        <MudItem xs="12" sm="10" md="6" lg="4">
            <MudCard Outlined="true" Style="width: 350px; margin: auto;">
                <MudCardContent>
                    <ErrorAlert Messages="_errorMessages" />

                    <MudForm @ref="_form" Model="@_resetPasswordModel"
                             Valid="@(() => true)"
                             Invalid="@(() => false)">

                        <!-- Nova lozinka -->
                        <MudTextField ShrinkLabel T="string"
                                      Label="Nova lozinka"
                                      For="@(() => _resetPasswordModel.NewPassword)"
                                      @bind-Value="_resetPasswordModel.NewPassword"
                                      InputType="InputType.Password"
                                      Required="true"
                                      Margin="Margin.Dense"
                                      Variant="Variant.Outlined"
                                      Class="mb-4" />

                        <!-- Potvrdi novu lozinku -->
                        <MudTextField ShrinkLabel T="string"
                                      Label="Potvrdi novu lozinku"
                                      For="@(() => _resetPasswordModel.ConfirmPassword)"
                                      @bind-Value="_resetPasswordModel.ConfirmPassword"
                                      InputType="InputType.Password"
                                      Required="true"
                                      Margin="Margin.Dense"
                                      Variant="Variant.Outlined"
                                      Class="mb-4" />

                        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mt-4">
                            <ChangePasswordButton OnClick="ChangePasswordAsync" />
                        </MudStack>
                    </MudForm>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
</Container>
